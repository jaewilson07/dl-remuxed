{
  "title": "[RouteContext] Migrate classes/DomoUser.py (19 methods)",
  "body": "## Objective\nMigrate `src/domolibrary2/classes/DomoUser.py` to use RouteContext via `_build_route_context()`.\n\n## Reference\nClass methods should use `self._build_route_context()` to construct context from passed parameters.\n\n## Tasks\n- [ ] Update all 19 methods that call route functions\n- [ ] Replace individual session/debug_api params with context\n- [ ] Use `self._build_route_context()` to create context\n- [ ] Pass context to route function calls\n- [ ] Verify all tests pass\n- [ ] Update `TO_DOS/classes/DomoUser.md` to mark methods as complete\n\n## Migration Pattern\n\n```python\nasync def method_name(\n    self,\n    param: str,\n    session: httpx.AsyncClient | None = None,\n    debug_api: bool = False,\n    return_raw: bool = False,\n) -> ResultType:\n    \"\"\"Docstring here.\"\"\"\n    context = self._build_route_context(\n        session=session,\n        debug_api=debug_api,\n        # log_level=\"WARNING\",  # Optional per-call override\n    )\n\n    res = await route_module.route_function(\n        auth=self.auth,\n        param=param,\n        context=context,\n        return_raw=return_raw,\n    )\n\n    if return_raw:\n        return res\n\n    return self.from_dict(auth=self.auth, obj=res.response)\n```\n\n## Methods to Update\n- [ ] `DomoUser.get_role` (line 193)\n- [ ] `DomoUser.get_by_id` (line 212)\n- [ ] `DomoUser.download_avatar` (line 270)\n- [ ] `DomoUser.update_properties` (line 304)\n- [ ] `DomoUser.set_user_landing_page` (line 343)\n- [ ] `DomoUser.create` (line 360)\n- [ ] `DomoUser.delete` (line 410)\n- [ ] `DomoUser.reset_password` (line 428)\n- [ ] `DomoUser.request_password_reset` (line 452)\n- [ ] `DomoUser.upload_avatar` (line 473)\n- [ ] `DomoUser.upsert_avatar` (line 499)\n- [ ] `DomoUser.toggle_direct_signon_access` (line 527)\n- [ ] `DomoUser.get_api_clients` (line 546)\n- [ ] `DomoUser.get_access_tokens` (line 591)\n- [ ] `DomoUsers.get` (line 668)\n- [ ] `DomoUsers.search_by_email` (line 693)\n- [ ] `DomoUsers.search_by_id` (line 741)\n- [ ] `DomoUsers.get_virtual_user_by_subscriber_instance` (line 784)\n- [ ] `DomoUsers.upsert` (line 804)\n\n## Success Criteria\n- All methods use `_build_route_context()`\n- Context properly passed to route functions\n- Existing tests pass without modification\n- Optional: Add test for `log_level` parameter if needed\n\n## Related Files\n- TODO: `external/dl-remuxed/TO_DOS/classes/DomoUser.md`\n- Implementation Plan: `external/dl-remuxed/code_review/route-context-implementation-plan.md`\n",
  "labels": [
    "route-context-migration",
    "refactor",
    "classes"
  ]
}
