{
  "title": "[RouteContext] Migrate routes/publish.py (14 functions)",
  "body": "## Objective\nMigrate `src/domolibrary2/routes/publish.py` to use the RouteContext pattern.\n\n## Reference Implementation\nSee `src/domolibrary2/routes/appdb/collections.py` for the canonical example.\n\n## Tasks\n- [ ] Add `RouteContext` import: `from ...client.context import RouteContext`\n- [ ] Update all 14 `@gd.route_function` decorated functions to accept `context` parameter\n- [ ] Add context normalization inside each function\n- [ ] Update `get_data()` calls to use `context=context`\n- [ ] Verify all tests pass\n- [ ] Update `TO_DOS/routes/publish.md` to mark functions as complete\n\n## Migration Pattern\n\nEach function should follow this pattern:\n\n```python\n@gd.route_function\nasync def function_name(\n    auth: DomoAuth,\n    required_param: str,\n    *,  # Make following params keyword-only\n    context: RouteContext | None = None,\n    session: httpx.AsyncClient | None = None,\n    debug_api: bool = False,\n    debug_num_stacks_to_drop: int = 1,\n    parent_class: Optional[str] = None,\n    return_raw: bool = False,\n) -> rgd.ResponseGetData:\n    \"\"\"Docstring here.\"\"\"\n    if context is None:\n        context = RouteContext(\n            session=session,\n            debug_api=debug_api,\n            debug_num_stacks_to_drop=debug_num_stacks_to_drop,\n            parent_class=parent_class,\n        )\n\n    url = f\"https://{auth.domo_instance}.domo.com/api/...\"\n\n    res = await gd.get_data(\n        auth=auth,\n        method=\"GET\",\n        url=url,\n        context=context,  # Use context instead of individual params\n    )\n\n    if not res.is_success:\n        raise SomeError(res=res)\n\n    return res\n```\n\n## Functions to Update\n- [ ] `search_publications` (line 43)\n- [ ] `get_publication_by_id` (line 94)\n- [ ] `get_subscription_by_id` (line 127)\n- [ ] `create_publish_job` (line 192)\n- [ ] `update_publish_job` (line 225)\n- [ ] `get_publish_subscriptions` (line 257)\n- [ ] `get_subscription_summaries` (line 290)\n- [ ] `get_subscriber_content_details` (line 321)\n- [ ] `get_subscription_invitations` (line 356)\n- [ ] `get_subscriber_domains` (line 387)\n- [ ] `add_subscriber_domain` (line 418)\n- [ ] `accept_invite_by_id` (line 448)\n- [ ] `accept_invite_by_id_v2` (line 476)\n- [ ] `refresh_publish_jobs` (line 516)\n\n## Success Criteria\n- All functions accept optional `context` parameter\n- All functions normalize context if not provided\n- All `get_data()` calls use context\n- Existing tests pass without modification\n- No breaking changes (legacy parameters still work via decorator)\n\n## Related Files\n- TODO: `external/dl-remuxed/TO_DOS/routes/publish.md`\n- Implementation Plan: `external/dl-remuxed/code_review/route-context-implementation-plan.md`\n",
  "labels": [
    "route-context-migration",
    "refactor"
  ]
}
